(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[197],{2194:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s(28),c=s(1),o=s(477),r=s(536),i=s(132),l=s(133),j=s(82),d=s.n(j),h={loginEndpoint:"/jwt/login",registerEndpoint:"/jwt/register",refreshEndpoint:"/jwt/refresh-token",logoutEndpoint:"/jwt/logout",appiaLoginEndpoint:"".concat("https://api.appiawave.com","/admin/sign_in"),tokenType:"Bearer",storageTokenKeyName:"accessToken",storageRefreshTokenKeyName:"refreshToken"};var b={jwt:new(function(){function e(t){var s=this;Object(i.a)(this,e),this.jwtConfig=Object(a.a)({},h),this.isAlreadyFetchingAccessToken=!1,this.subscribers=[],this.jwtConfig=Object(a.a)(Object(a.a)({},this.jwtConfig),t),d.a.interceptors.request.use((function(e){var t=s.getToken();return t&&(e.headers.Authorization="".concat(s.jwtConfig.tokenType," ").concat(t)),e}),(function(e){return Promise.reject(e)})),d.a.interceptors.response.use((function(e){return e}),(function(e){var t=e.config,a=e.response,n=t;return a&&401===a.status?(s.isAlreadyFetchingAccessToken||(s.isAlreadyFetchingAccessToken=!0,s.refreshToken().then((function(e){s.isAlreadyFetchingAccessToken=!1,s.setToken(e.data.accessToken),s.setRefreshToken(e.data.refreshToken),s.onAccessTokenFetched(e.data.accessToken)}))),new Promise((function(e){s.addSubscriber((function(t){n.headers.Authorization="".concat(s.jwtConfig.tokenType," ").concat(t),e(s.axios(n))}))}))):Promise.reject(e)}))}return Object(l.a)(e,[{key:"onAccessTokenFetched",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t(e)}))}},{key:"addSubscriber",value:function(e){this.subscribers.push(e)}},{key:"getToken",value:function(){return localStorage.getItem(this.jwtConfig.storageTokenKeyName)}},{key:"getRefreshToken",value:function(){return localStorage.getItem(this.jwtConfig.storageRefreshTokenKeyName)}},{key:"setToken",value:function(e){localStorage.setItem(this.jwtConfig.storageTokenKeyName,e)}},{key:"setRefreshToken",value:function(e){localStorage.setItem(this.jwtConfig.storageRefreshTokenKeyName,e)}},{key:"login",value:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return d.a.post.apply(d.a,[this.jwtConfig.appiaLoginEndpoint].concat(t))}},{key:"register",value:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return d.a.post.apply(d.a,[this.jwtConfig.registerEndpoint].concat(t))}},{key:"refreshToken",value:function(){return d.a.post(this.jwtConfig.refreshEndpoint,{refreshToken:this.getRefreshToken()})}}]),e}())({})}.jwt,u=s(81),m=s(125),p=s(1004),f=s(128),g=s(806),O=s(473),x=s(523),y=s(483),v=s(1052),k=s(511),w=s(479),N=s(482),C=s(480),T=s(484),F=s(984),A=s(496),E=s(981),L=s(469),P=s(556),S=(s(544),s(6)),I=function(e){var t=e.name,s=e.role;return Object(S.jsxs)(c.Fragment,{children:[Object(S.jsx)("div",{className:"toastify-header",children:Object(S.jsxs)("div",{className:"title-wrapper",children:[Object(S.jsx)(o.a,{size:"sm",color:"success",icon:Object(S.jsx)(v.a,{size:12})}),Object(S.jsxs)("h6",{className:"toast-title font-weight-bold",children:["Welcome, ",t]})]})}),Object(S.jsx)("div",{className:"toastify-body",children:Object(S.jsxs)("span",{children:["You have successfully logged in as an ",s," user to Appia. Now you can start to explore. Enjoy!"]})})]})},z=function(e){var t=e.message;return Object(S.jsxs)(c.Fragment,{children:[Object(S.jsx)("div",{className:"toastify-header",children:Object(S.jsxs)("div",{className:"title-wrapper",children:[Object(S.jsx)(o.a,{size:"sm",color:"success",icon:Object(S.jsx)(v.a,{size:12})}),Object(S.jsx)("h6",{className:"toast-title font-weight-bold",children:t})]})}),Object(S.jsx)("div",{className:"toastify-body",children:Object(S.jsx)("span",{children:"invalid"})})]})};t.default=function(e){var t=Object(r.a)(),o=Object(n.a)(t,2),i=o[0],l=(o[1],Object(c.useContext)(f.a)),j=Object(u.b)(),d=Object(g.g)(),h=Object(c.useState)(""),v=Object(n.a)(h,2),R=v[0],G=v[1],K=Object(c.useState)(""),B=Object(n.a)(K,2),_=B[0],q=B[1],J=Object(c.useState)(!1),M=Object(n.a)(J,2),W=M[0],D=M[1],Z="dark"===i?"login-v2-dark.svg":"login-v2.svg",V=s(676)("./".concat(Z)).default;return Object(S.jsx)("div",{className:"auth-wrapper auth-v2",children:Object(S.jsxs)(w.a,{className:"auth-inner m-0",children:[Object(S.jsxs)(O.b,{className:"brand-logo",to:"/",onClick:function(e){return e.preventDefault()},children:[Object(S.jsxs)("svg",{viewBox:"0 0 139 95",version:"1.1",height:"28",children:[Object(S.jsxs)("defs",{children:[Object(S.jsxs)("linearGradient",{x1:"100%",y1:"10.5120544%",x2:"50%",y2:"89.4879456%",id:"linearGradient-1",children:[Object(S.jsx)("stop",{stopColor:"#000000",offset:"0%"}),Object(S.jsx)("stop",{stopColor:"#FFFFFF",offset:"100%"})]}),Object(S.jsxs)("linearGradient",{x1:"64.0437835%",y1:"46.3276743%",x2:"37.373316%",y2:"100%",id:"linearGradient-2",children:[Object(S.jsx)("stop",{stopColor:"#EEEEEE",stopOpacity:"0",offset:"0%"}),Object(S.jsx)("stop",{stopColor:"#FFFFFF",offset:"100%"})]})]}),Object(S.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(S.jsx)("g",{id:"Artboard",transform:"translate(-400.000000, -178.000000)",children:Object(S.jsxs)("g",{id:"Group",transform:"translate(400.000000, 178.000000)",children:[Object(S.jsx)("path",{d:"M-5.68434189e-14,2.84217094e-14 L39.1816085,2.84217094e-14 L69.3453773,32.2519224 L101.428699,2.84217094e-14 L138.784583,2.84217094e-14 L138.784199,29.8015838 C137.958931,37.3510206 135.784352,42.5567762 132.260463,45.4188507 C128.736573,48.2809251 112.33867,64.5239941 83.0667527,94.1480575 L56.2750821,94.1480575 L6.71554594,44.4188507 C2.46876683,39.9813776 0.345377275,35.1089553 0.345377275,29.8015838 C0.345377275,24.4942122 0.230251516,14.560351 -5.68434189e-14,2.84217094e-14 Z",id:"Path",className:"text-primary",style:{fill:"currentColor"}}),Object(S.jsx)("path",{d:"M69.3453773,32.2519224 L101.428699,1.42108547e-14 L138.784583,1.42108547e-14 L138.784199,29.8015838 C137.958931,37.3510206 135.784352,42.5567762 132.260463,45.4188507 C128.736573,48.2809251 112.33867,64.5239941 83.0667527,94.1480575 L56.2750821,94.1480575 L32.8435758,70.5039241 L69.3453773,32.2519224 Z",id:"Path",fill:"url(#linearGradient-1)",opacity:"0.2"}),Object(S.jsx)("polygon",{id:"Path-2",fill:"#000000",opacity:"0.049999997",points:"69.3922914 32.4202615 32.8435758 70.5039241 54.0490008 16.1851325"}),Object(S.jsx)("polygon",{id:"Path-2",fill:"#000000",opacity:"0.099999994",points:"69.3922914 32.4202615 32.8435758 70.5039241 58.3683556 20.7402338"}),Object(S.jsx)("polygon",{id:"Path-3",fill:"url(#linearGradient-2)",opacity:"0.099999994",points:"101.428699 0 83.0667527 94.1480575 130.378721 47.0740288"})]})})})]}),Object(S.jsx)("h2",{className:"brand-text text-primary ml-1",children:"Appia"})]}),Object(S.jsx)(N.a,{className:"d-none d-lg-flex align-items-center p-5",lg:"8",sm:"12",children:Object(S.jsx)("div",{className:"w-100 d-lg-flex align-items-center justify-content-center px-5",children:Object(S.jsx)("img",{className:"img-fluid",src:V,alt:"Login V2"})})}),Object(S.jsx)(N.a,{className:"d-flex align-items-center auth-bg px-2 p-lg-5",lg:"4",sm:"12",children:Object(S.jsxs)(N.a,{className:"px-xl-2 mx-auto",sm:"8",md:"6",lg:"12",children:[Object(S.jsx)(C.a,{tag:"h2",className:"font-weight-bold mb-1",children:"Welcome to Appia! \ud83d\udc4b"}),Object(S.jsx)(T.a,{className:"mb-2",children:"Please sign-in to your account and start the adventure"}),Object(S.jsxs)(k.AvForm,{className:"auth-login-form mt-2",onSubmit:function(e,t){t&&!t.length&&(D(!0),b.login({email:R,password:_}).then((function(e){if(e.data.success){var t=Object(a.a)(Object(a.a)({},e.data.data),{},{accessToken:e.data.token,refreshToken:e.data.token,ability:[{action:"manage",subject:"all"}],avatar:"/demo/Appia-react-admin-dashboard-template/demo-1/static/media/avatar-s-11.1d46cc62.jpg",extras:{eCommerceCartItemsCount:5}});j(Object(p.a)(t)),l.update(t.ability),d.push(Object(y.d)(t.role_name)),m.f.success(Object(S.jsx)(I,{name:"".concat(t.first_name," ").concat(t.last_name)||t.fullName||t.username||"John Doe",role:t.role||"admin"}),{transition:m.c,hideProgressBar:!0,autoClose:2e3})}else m.f.error(Object(S.jsx)(z,{message:"".concat(e.data.message)||"admin"}),{transition:m.c,hideProgressBar:!0,autoClose:2e3}),D(!1)})).catch((function(e){return console.log(e)})))},children:[Object(S.jsxs)(F.a,{children:[Object(S.jsx)(A.a,{className:"form-label",for:"login-email",children:"Email"}),Object(S.jsx)(k.AvInput,{required:!0,autoFocus:!0,type:"email",value:R,id:"login-email",name:"login-email",placeholder:"john@example.com",onChange:function(e){return G(e.target.value)}})]}),Object(S.jsxs)(F.a,{children:[Object(S.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(S.jsx)(A.a,{className:"form-label",for:"login-password",children:"Password"}),Object(S.jsx)(O.b,{to:"/forgot-password",children:Object(S.jsx)("small",{children:"Forgot Password?"})})]}),Object(S.jsx)(x.a,{required:!0,tag:k.AvInput,value:_,id:"login-password",name:"login-password",autoComplete:"on",className:"input-group-merge",onChange:function(e){return q(e.target.value)}})]}),Object(S.jsx)(F.a,{children:Object(S.jsx)(E.a,{type:"checkbox",className:"custom-control-Primary",id:"remember-me",label:"Remember Me"})}),Object(S.jsxs)(L.a.Ripple,{color:"primary",block:!0,disabled:W,children:[W&&Object(S.jsx)(P.a,{color:"white",size:"sm"}),Object(S.jsx)("span",{className:"ml-50",children:"Sign In"})]})]})]})})]})})}},523:function(e,t,s){"use strict";var a=s(0),n=s(58),c=s(28),o=s(122),r=s(1),i=s(27),l=s.n(i),j=s(1067),d=s(1066),h=s(496),b=s(996),u=s(998),m=s(997),p=s(811),f=s(6),g=function(e){var t=e.label,s=e.hideIcon,i=e.showIcon,g=e.visible,O=e.className,x=e.htmlFor,y=e.placeholder,v=e.iconSize,k=Object(o.a)(e,["label","hideIcon","showIcon","visible","className","htmlFor","placeholder","iconSize"]),w=Object(r.useState)(g),N=Object(c.a)(w,2),C=N[0],T=N[1];return Object(f.jsxs)(r.Fragment,{children:[t?Object(f.jsx)(h.a,{for:x,children:t}):null,Object(f.jsxs)(b.a,{className:l()(Object(n.a)({},O,O)),children:[Object(f.jsx)(u.a,Object(a.a)(Object(a.a)({type:!1===C?"password":"text",placeholder:y||"\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7"},t&&x?{id:x}:{}),k)),Object(f.jsx)(m.a,{addonType:"append",onClick:function(){return T(!C)},children:Object(f.jsx)(p.a,{className:"cursor-pointer",children:function(){var e=v||14;return!1===C?s||Object(f.jsx)(j.a,{size:e}):i||Object(f.jsx)(d.a,{size:e})}()})})]})]})};t.a=g,g.defaultProps={visible:!1}}}]);
//# sourceMappingURL=197.760c7359.chunk.js.map