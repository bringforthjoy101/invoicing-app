{"version":3,"sources":["views/appia/dataPlans/store/action/index.js","views/appia/dataPlans/view/PlanCard.js","views/appia/dataPlans/view/DataPlanInfo.js","views/appia/dataPlans/view/index.js"],"names":["getAllData","dispatch","a","apiRequest","url","method","response","data","success","type","console","log","error","swal","getFilteredData","dataPlans","params","q","perPage","page","role","category","queryLowered","toLowerCase","filteredData","filter","plan","network","includes","validity","product_id","paginateArray","totalPages","length","getPlan","id","find","i","selectedPlan","PlanCard","useDispatch","useState","formModal","setFormModal","DeletePlanSchema","Yup","shape","data_plan_id","required","Card","className","CardHeader","CardBody","Button","Ripple","color","outline","block","onClick","Modal","isOpen","toggle","ModalHeader","initialValues","validationSchema","onSubmit","values","setSubmitting","body","JSON","stringify","message","errors","touched","isSubmitting","ModalBody","FormGroup","htmlFor","name","placeholder","component","ModalFooter","disabled","Spinner","size","DataPlanInfo","Row","Col","xl","lg","CardText","tag","price","toLocaleString","style","currency","allowance","DataPlanView","props","store","useSelector","state","appiaDataPlans","useParams","setUserData","useEffect","isUserLoggedIn","parse","localStorage","getItem","undefined","md","Alert","to"],"mappings":"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","file":"static/js/203.341652f1.chunk.js","sourcesContent":["import { paginateArray, apiRequest, swal } from '@utils'\n\n\n// ** Get all Data\nexport const getAllData = () => {\n  return async dispatch => {\n    const response = await apiRequest({ url: '/admin/rewards/data-plans/get', method: 'GET' }, dispatch)\n    if (response) {\n      if (response.data.data && response.data.success) {\n        await dispatch({\n          type: 'GET_ALL_DATA_PLANS',\n          data: response.data.data\n        })\n      } else {\n        console.log(response.error)\n      }\n    } else {\n      swal('Oops!', 'Somthing went wrong with your network.', 'error')\n    }\n\n  }\n}\n\n// ** Get filtered data on page or row change\nexport const getFilteredData = (dataPlans, params) => {\n  return async dispatch => {\n    const { q = '', perPage = 10, page = 1, role = null, category = null } = params\n\n    /* eslint-disable  */\n    const queryLowered = q.toLowerCase()\n    const filteredData = dataPlans.filter(\n      plan =>\n        (plan.network.toLowerCase().includes(queryLowered) || plan.category.toLowerCase().includes(queryLowered) || plan.validity.toLowerCase().includes(queryLowered) || plan.product_id.toLowerCase().includes(queryLowered)) &&\n        plan.category === (category || plan.category)\n    )\n    /* eslint-enable  */\n\n    dispatch({\n      type: 'GET_FILTERED_DATA_PLANS',\n      data: paginateArray(filteredData, perPage, page),\n      totalPages: filteredData.length,\n      params\n    })\n  }\n}\n\nexport const getPlan = (dataPlans, id) => {\n  return async dispatch => {\n    const plan = dataPlans.find(i => i.id === id)\n    dispatch({\n      type: 'GET_PLAN',\n      selectedPlan: plan\n    })\n  }\n}\n","import { useState, useEffect } from 'react'\n// ** Reactstrap\nimport { Card, CardHeader, CardBody, Badge, UncontrolledTooltip, Button, Spinner, Modal, ModalHeader, ModalBody, ModalFooter, Label, FormGroup, Input } from 'reactstrap'\nimport { Formik, Field, Form, ErrorMessage } from 'formik'\nimport * as Yup from 'yup'\nimport { store } from '@store/storeConfig/store'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { getAllData } from '../store/action'\nimport { swal, apiRequest } from '@utils'\n\n\nconst PlanCard = ({ selectedPlan }) => {\n  const dispatch = useDispatch()\n\n  const [formModal, setFormModal] = useState(false)\n\n\n  const DeletePlanSchema = Yup.object().shape({\n    data_plan_id: Yup.string().required(\"required\")\n  })\n\n\n  return (\n    <Card className='plan-card border-primary'>\n      <CardHeader className='d-flex justify-content-between align-items-center pt-75 pb-1'>\n        <h5 className='mb-0'>Actions</h5>\n      </CardHeader>\n      <CardBody>\n        <Button.Ripple className='text-center mb-1' color='danger' outline block onClick={() => setFormModal(!formModal)}>\n          Delete Plan\n      </Button.Ripple>\n        <Modal isOpen={formModal} toggle={() => setFormModal(!formModal)} className='modal-dialog-centered'>\n          <ModalHeader toggle={() => setFormModal(!formModal)}>Add Funds</ModalHeader>\n          <Formik\n            initialValues={{\n              data_plan_id: selectedPlan.id\n            }}\n            validationSchema={DeletePlanSchema}\n            onSubmit={async (values, { setSubmitting }) => {\n              const body = JSON.stringify(values)\n              try {\n                const response = await apiRequest({ url: '/admin/rewards/data-plan/delete', method: 'POST', body }, dispatch)\n                if (response) {\n                  if (response.data.success) {\n                    swal('Great job!', response.data.message, 'success')\n                    dispatch(getAllData())\n                  } else {\n                    swal('Oops!', response.data.message, 'error')\n                  }\n                } else {\n                  swal('Oops!', 'Something went wrong with your network.', 'error')\n                }\n\n              } catch (error) {\n                console.error({ error })\n              }\n              setSubmitting(false)\n              setFormModal(!formModal)\n            }}\n          >\n\n            {({ errors, touched, isSubmitting }) => (\n              <Form>\n                <ModalBody>\n                  <FormGroup>\n                    <label htmlFor='data_plan_id'>Plan Id</label>\n                    <Field\n                      type='number'\n                      name='data_plan_id'\n                      placeholder='plan id'\n                      className={`form-control ${errors.data_plan_id && touched.data_plan_id && 'is-invalid'}`}\n                    />\n                    <ErrorMessage name='data_plan_id' component='div' className='field-error text-danger' />\n                  </FormGroup>\n                </ModalBody>\n                <ModalFooter>\n                  <Button.Ripple color='primary' type='submit' disabled={isSubmitting}>\n                    {isSubmitting && <Spinner color='white' size='sm' />}\n                    <span className='ml-50'>Delete Plan</span>\n                  </Button.Ripple>\n                </ModalFooter>\n              </Form>\n            )}\n          </Formik>\n        </Modal>\n      </CardBody>\n    </Card>\n  )\n}\n\nexport default PlanCard\n","// ** React Imports\nimport { Link } from 'react-router-dom'\n\n// ** Custom Components\nimport Avatar from '@components/avatar'\n\n// ** Third Party Components\nimport { Card, CardBody, CardText, Button, Row, Col } from 'reactstrap'\nimport { DollarSign, TrendingUp, User, Check, Star, Flag, Phone, BarChart, Key, Layers, Clock, Pocket } from 'react-feather'\n\nconst DataPlanInfo = ({ selectedPlan }) => {\n\n  return (\n    <Card>\n      <CardBody>\n        <Row>\n          <Col xl='6' lg='12' className='mt-2 mt-xl-0'>\n            <div className='user-info-wrapper'>\n              <div className='d-flex flex-wrap align-items-center mb-1'>\n                <div className='d-flex align-items-center'>\n                  <div className='color-box bg-light-info'>\n                    <Key className='text-info' />\n                  </div>\n                  <CardText tag='span' className='user-info-title font-weight-bold mb-0 ml-1'>\n                    Product Id\n                  </CardText>\n                </div>\n                <CardText className='mb-0'>\n                  {selectedPlan.product_id}\n                </CardText>\n              </div>\n              <div className='d-flex flex-wrap align-items-center mb-1'>\n                <div className='d-flex align-items-center'>\n                  <div className='color-box bg-light-warning'>\n                    <BarChart className='text-warning' />\n                  </div>\n                  <CardText tag='span' className='user-info-title font-weight-bold mb-0 ml-1'>\n                    Network\n                  </CardText>\n                </div>\n                <CardText className='mb-0'>\n                  {selectedPlan.network}\n                </CardText>\n              </div>\n              <div className='d-flex flex-wrap align-items-center mb-1'>\n                <div className='d-flex align-items-center'>\n                  <div className='color-box bg-light-secoundary'>\n                    <Pocket className='text-secoundary' />\n                  </div>\n                  <CardText tag='span' className='user-info-title font-weight-bold mb-0 ml-1'>\n                    Price\n                  </CardText>\n                </div>\n                <CardText className='text-capitalize mb-0'>\n                  {selectedPlan.price.toLocaleString('en-US', { style: 'currency', currency: 'NGN' })}\n                </CardText>\n              </div>\n            </div>\n          </Col>\n          <Col xl='6' lg='12' className='mt-2 mt-xl-0'>\n            <div className='user-info-wrapper'>\n              <div className='d-flex flex-wrap align-items-center mb-1'>\n                <div className='d-flex align-items-center'>\n                  <div className='color-box bg-light-primary'>\n                    <Layers className='text-primary' />\n                  </div>\n                  <CardText tag='span' className='user-info-title text-capitalize font-weight-bold mb-0 ml-1'>\n                    Category\n                  </CardText>\n                </div>\n                <CardText className='text-capitalize mb-0'>\n                  {selectedPlan.category}\n                </CardText>\n              </div>\n              <div className='d-flex flex-wrap align-items-center mb-1'>\n                <div className='d-flex align-items-center'>\n                  <div className='color-box bg-light-secoundary'>\n                    <Pocket className='text-secoundary' />\n                  </div>\n                  <CardText tag='span' className='user-info-title font-weight-bold mb-0 ml-1'>\n                    Allowance\n                  </CardText>\n                </div>\n                <CardText className='mb-0'>{selectedPlan.allowance}</CardText>\n              </div>\n              <div className='d-flex flex-wrap align-items-center mb-1'>\n                <div className='d-flex align-items-center'>\n                  <div className='color-box bg-light-success'>\n                    <Clock className='text-success' />\n                  </div>\n                  <CardText tag='span' className='user-info-title font-weight-bold mb-0 ml-1'>\n                    Validity\n                  </CardText>\n                </div>\n                <CardText className='mb-0'>{selectedPlan.validity}</CardText>\n              </div>\n            </div>\n          </Col>\n        </Row>\n      </CardBody>\n    </Card>\n  )\n}\n\nexport default DataPlanInfo\n","// ** React Imports\nimport { useEffect, useState } from 'react'\nimport { useParams, Link } from 'react-router-dom'\nimport moment from 'moment'\n\n// ** Store & Actions\nimport { useSelector, useDispatch } from 'react-redux'\nimport { isUserLoggedIn } from '@utils'\n\n// ** Reactstrap\nimport { Row, Col, Alert } from 'reactstrap'\n\n// ** User View Components\nimport PlanCard from './PlanCard'\nimport DataPlanInfo from './DataPlanInfo'\n\n// ** Styles\nimport '@styles/react/apps/app-users.scss'\n\nconst DataPlanView = props => {\n  // ** Vars\n  const store = useSelector(state => state.appiaDataPlans),\n    dispatch = useDispatch(),\n    { id } = useParams()\n\n  const [userData, setUserData] = useState(null)\n\n  useEffect(() => {\n    if (isUserLoggedIn() !== null) {\n      setUserData(JSON.parse(localStorage.getItem('userData')))\n    }\n  }, [])\n  // ** Get suer on mount\n  useEffect(() => {\n    // dispatch(getPlan(store.allData, id))\n  }, [dispatch])\n\n\n  return store.selectedPlan !== null && store.selectedPlan !== undefined ? (\n    <div className='app-user-view'>\n      <Row>\n        <Col xl='9' lg='8' md='7'>\n          <DataPlanInfo selectedPlan={store.selectedPlan} />\n        </Col>\n        {/* {userData?.role_name === \"Super Admin\" ?  */}\n        <Col xl='3' lg='4' md='5'>\n          <PlanCard selectedPlan={store.selectedPlan} />\n        </Col> \n        {/* // : \"\"} */}\n      </Row>\n    </div>\n  ) : (\n    <Alert color='danger'>\n      <h4 className='alert-heading'>Users not found</h4>\n      <div className='alert-body'>\n        Users with id: {id} doesn't exist. Check list of all Users: <Link to='/app/user/list'>Users List</Link>\n      </div>\n    </Alert>\n  )\n}\nexport default DataPlanView\n"],"sourceRoot":""}